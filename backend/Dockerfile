# ğŸ—ï¸ Usa una imagen base ligera de Node.js para optimizar el contenedor
FROM node:18-alpine

# ğŸ“ Establecer directorio de trabajo dentro del contenedor
WORKDIR /app

# ğŸ”½ Copiar los archivos de dependencias antes del cÃ³digo fuente para aprovechar la cachÃ© de Docker
COPY package*.json ./

# ğŸ“¦ Instalar dependencias sin romper compatibilidad de versiones
RUN npm install --legacy-peer-deps

# ğŸ“‚ Copiar todo el cÃ³digo fuente al contenedor despuÃ©s de instalar dependencias
COPY . .

# ğŸ” Ajustar permisos para evitar problemas de acceso en entornos de producciÃ³n
RUN chmod -R 755 /app

# ğŸŒ Exponer el puerto 3000 para que el backend sea accesible
EXPOSE 3000

# ğŸš€ Comando de inicio del backend
CMD ["npm", "start"]
